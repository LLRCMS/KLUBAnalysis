#include <TFile.h>
#include <TTree.h>


#include <iostream>
#include <fstream>
#include <iomanip>

void selections_etau(){
  TFile *file = TFile::Open("output.root");
  TTree *tree = (TTree *) file->Get("HTauTauTree");
  
  
 /////////ETau
  TCut resolved_2b0j = "isOS == 1 && pairType == 2 && dau1_pt > 27 && abs(dau1_eta) < 2.1 && dau2_pt > 20 && abs(dau2_eta) < 2.3 && nleps == 0 && bjet1_bID > 0.800 && bjet2_bID > 0.800 && isBoosted != 1 && bTagweightM > -999";
  TCut resolved_1b1j = "isOS == 1 && pairType == 2 && dau1_pt > 27 && abs(dau1_eta) < 2.1 && dau2_pt > 20 && abs(dau2_eta) < 2.3 && nleps == 0 && bjet1_bID > 0.800 && bjet2_bID < 0.800 && isBoosted != 1 ";
  TCut resolved_2b0j_Mcut = "isOS == 1 && pairType == 2 && dau1_pt > 27 && abs(dau1_eta) < 2.1 && dau2_pt > 20 && abs(dau2_eta) < 2.3 && nleps == 0 && bjet1_bID > 0.800 && bjet2_bID > 0.800 && isBoosted != 1 && tauH_SVFIT_mass > 80 && tauH_SVFIT_mass < 160 && bH_mass_raw > 80 && bH_mass_raw < 160 && bTagweightM > -999";
  TCut resolved_1b1j_Mcut = "isOS == 1 && pairType == 2 && dau1_pt > 27 && abs(dau1_eta) < 2.1 && dau2_pt > 20 && abs(dau2_eta) < 2.3 && nleps == 0 && bjet1_bID > 0.800 && bjet2_bID < 0.800 && isBoosted != 1 && tauH_SVFIT_mass > 80 && tauH_SVFIT_mass < 160 && bH_mass_raw > 80 && bH_mass_raw < 160 && bTagweightM > -999";
  TCut boosted  = "isOS == 1 && pairType == 2 && dau1_pt > 27 && abs(dau1_eta) < 2.1 && dau2_pt > 20 && abs(dau2_eta) < 2.3 && nleps == 0 && bjet1_bID > 0.460 && bjet2_bID > 0.460 && isBoosted == 1 ";
  TCut boosted_Mcut = "isOS == 1 && pairType == 2 && dau1_pt > 27 && abs(dau1_eta) < 2.1 && dau2_pt > 20 && abs(dau2_eta) < 2.3 && nleps == 0 && bjet1_bID > 0.460 && bjet2_bID > 0.460 && isBoosted == 1 && tauH_SVFIT_mass > 80 && tauH_SVFIT_mass < 160 && fatjet_softdropMass > 90 && fatjet_softdropMass < 160 ";
  
  TCut defaultBtagLLNoIso = "isOS == 1 && pairType == 2 && dau1_pt > 27 && abs (dau1_eta) < 2.1 && dau2_pt > 20 && abs (dau2_eta) < 2.3 && nleps == 0 && bjet1_bID > 0.460 && bjet2_bID > 0.460 && HH_mass_raw > 200 && bTagweightL > -999";
  TCut defaultBtagLLNoIsoBBTTCut = "isOS == 1 && pairType == 2 && dau1_pt > 27 && abs (dau1_eta) < 2.1 && dau2_pt > 20 && abs (dau2_eta) < 2.3 && nleps == 0 && bjet1_bID > 0.460 && bjet2_bID > 0.460 && bH_mass_raw > 80 && bH_mass_raw < 160 && tauH_SVFIT_mass > 80 && tauH_SVFIT_mass < 160 && HH_mass_raw > 200 && bTagweightL > -999";
  TCut defaultBtagMMNoIsoBBTTCut = "isOS == 1 && pairType == 2 && dau1_pt > 27 && abs (dau1_eta) < 2.1 && dau2_pt > 20 && abs (dau2_eta) < 2.3 && nleps == 0 && bjet1_bID > 0.800 && bjet2_bID > 0.800 && bH_mass_raw > 80 && bH_mass_raw < 160 && tauH_SVFIT_mass > 80 && tauH_SVFIT_mass < 160 && bTagweightM > -999";
  TCut defaultBtagLLNoIsoBBTTCutKine80 = "isOS == 1 && pairType == 2 && dau1_pt > 27 && abs (dau1_eta) < 2.1 && dau2_pt > 20 && abs (dau2_eta) < 2.3 && nleps == 0 && bjet1_bID > 0.460 && bjet2_bID > 0.460 && bH_mass_raw > 80 && bH_mass_raw < 160 && tauH_SVFIT_mass > 80 && tauH_SVFIT_mass < 160 && LepTauKine > -0.134 && HH_mass_raw > 200 && bTagweightL > -999";
  TCut defaultBtagLLNoIsoBBTTCutKine801tag = "isOS == 1 && pairType == 2 && dau1_pt > 27 && abs (dau1_eta) < 2.1 && dau2_pt > 20 && abs (dau2_eta) < 2.3 && nleps == 0 && bjet1_bID > 0.460 && bjet2_bID < 0.460 && bH_mass_raw > 80 && bH_mass_raw < 160 && tauH_SVFIT_mass > 80 && tauH_SVFIT_mass < 160 && LepTauKine > -0.134 && HH_mass_raw > 200 && bTagweightL > -999";
  
  ((TTreePlayer*)(tree->GetPlayer()))->SetScanRedirect(true);
  ((TTreePlayer*)(tree->GetPlayer()))->SetScanFileName("resolved_2b0j_etau.txt");
  tree->Scan("EventNumber:RunNumber:lumi",resolved_2b0j);

  ((TTreePlayer*)(tree->GetPlayer()))->SetScanFileName("resolved_1b1j_etau.txt");
  tree->Scan("EventNumber:RunNumber:lumi",resolved_1b1j);

  ((TTreePlayer*)(tree->GetPlayer()))->SetScanFileName("resolved_2b0j_Mcut_etau.txt");
  tree->Scan("EventNumber:RunNumber:lumi",resolved_2b0j_Mcut);

  ((TTreePlayer*)(tree->GetPlayer()))->SetScanFileName("resolved_1b1j_Mcut_etau.txt");
  tree->Scan("EventNumber:RunNumber:lumi",resolved_1b1j_Mcut);

  ((TTreePlayer*)(tree->GetPlayer()))->SetScanFileName("boosted_etau.txt");
  tree->Scan("EventNumber:RunNumber:lumi",boosted);

  ((TTreePlayer*)(tree->GetPlayer()))->SetScanFileName("boosted_Mcut_etau.txt");
  tree->Scan("EventNumber:RunNumber:lumi",boosted_Mcut);

  ((TTreePlayer*)(tree->GetPlayer()))->SetScanFileName("defaultBtagMMNoIsoBBTTCut_etau.txt");
  tree->Scan("EventNumber:RunNumber:lumi",defaultBtagMMNoIsoBBTTCut);

  ((TTreePlayer*)(tree->GetPlayer()))->SetScanFileName("defaultBtagLLNoIso_etau.txt");
  tree->Scan("EventNumber:RunNumber:lumi",defaultBtagLLNoIso);

  ((TTreePlayer*)(tree->GetPlayer()))->SetScanFileName("defaultBtagLLNoIsoBBTTCut_etau.txt");
  tree->Scan("EventNumber:RunNumber:lumi",defaultBtagLLNoIsoBBTTCut);

  ((TTreePlayer*)(tree->GetPlayer()))->SetScanFileName("defaultBtagLLNoIsoBBTTCutKine80_etau.txt");
  tree->Scan("EventNumber:RunNumber:lumi",defaultBtagLLNoIsoBBTTCutKine80);

  ((TTreePlayer*)(tree->GetPlayer()))->SetScanFileName("defaultBtagLLNoIsoBBTTCutKine801tag_etau.txt");
  tree->Scan("EventNumber:RunNumber:lumi",defaultBtagLLNoIsoBBTTCutKine801tag);
}
