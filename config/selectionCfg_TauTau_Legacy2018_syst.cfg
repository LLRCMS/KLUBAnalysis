# the definition of composed selections. Can contain as well TCut style selections, e.g.:
# resolved = baseline, btagMM, massCut
# resolvedHighPt = baseline, btagMM, massCut, dau1_pt > 150
# use comma separated lists
[selections]

# btag requirements - DeepFlavor WPs={0.0494, 0.2770, 0.7264}; // L,M,T -- Legacy 2018 DeepFlavor
btagL        = bjet1_bID_deepFlavor > 0.0494 && bjet2_bID_deepFlavor < 0.0494 #only 1 jet with loose btag working point
btagM        = bjet1_bID_deepFlavor > 0.2770 && bjet2_bID_deepFlavor < 0.2770 #only 1 jet with medium btag working point
btagLL       = bjet1_bID_deepFlavor > 0.0494 && bjet2_bID_deepFlavor > 0.0494 #both jets with loose btag working point
btagMM       = bjet1_bID_deepFlavor > 0.2770 && bjet2_bID_deepFlavor > 0.2770 #both jets with medium btag working point
nobtagMM     = bjet1_bID_deepFlavor < 0.2770 && bjet2_bID_deepFlavor < 0.2770 #both jets NOT btagged (medium working point)

# Signal Region: opposite sign, isolated taus
SR = isOS != 0 && dau1_deepTauVsJet >= 5 && dau2_deepTauVsJet >= 5


### -- Selections with tes/mes/ees
### when shifting up/down the tauh --> we evaluate acceptance requiring +5 GeV on the threshold
### jets are unshifted by this --> left to the nominal threshold
### -- Selections with jes
### jets are selected at skim level to have pt > 20
### so I am raising the pt value to 25 just to test the change in the acceptance
### taus are unshifted by this --> left to the nominal threshold

###### baselines
baseline_nominal      = pairType == 2 && dau1_pt              > 45 && abs (dau1_eta) < 2.1 && dau2_pt              > 45 && abs (dau2_eta) < 2.1 && nleps == 0 && bjet1_pt > 20 && bjet2_pt > 20 && isVBFtrigger == 0 && nbjetscand > 1

baseline_tesUp_DM0    = pairType == 2 && dau1_pt_tauup_DM0    > 45 && abs (dau1_eta) < 2.1 && dau2_pt_tauup_DM0    > 45 && abs (dau2_eta) < 2.1 && nleps == 0 && bjet1_pt > 20 && bjet2_pt > 20 && isVBFtrigger == 0 && nbjetscand > 1
baseline_tesDown_DM0  = pairType == 2 && dau1_pt_taudown_DM0  > 45 && abs (dau1_eta) < 2.1 && dau2_pt_taudown_DM0  > 45 && abs (dau2_eta) < 2.1 && nleps == 0 && bjet1_pt > 20 && bjet2_pt > 20 && isVBFtrigger == 0 && nbjetscand > 1
baseline_tesUp_DM1    = pairType == 2 && dau1_pt_tauup_DM1    > 45 && abs (dau1_eta) < 2.1 && dau2_pt_tauup_DM1    > 45 && abs (dau2_eta) < 2.1 && nleps == 0 && bjet1_pt > 20 && bjet2_pt > 20 && isVBFtrigger == 0 && nbjetscand > 1
baseline_tesDown_DM1  = pairType == 2 && dau1_pt_taudown_DM1  > 45 && abs (dau1_eta) < 2.1 && dau2_pt_taudown_DM1  > 45 && abs (dau2_eta) < 2.1 && nleps == 0 && bjet1_pt > 20 && bjet2_pt > 20 && isVBFtrigger == 0 && nbjetscand > 1
baseline_tesUp_DM10   = pairType == 2 && dau1_pt_tauup_DM10   > 45 && abs (dau1_eta) < 2.1 && dau2_pt_tauup_DM10   > 45 && abs (dau2_eta) < 2.1 && nleps == 0 && bjet1_pt > 20 && bjet2_pt > 20 && isVBFtrigger == 0 && nbjetscand > 1
baseline_tesDown_DM10 = pairType == 2 && dau1_pt_taudown_DM10 > 45 && abs (dau1_eta) < 2.1 && dau2_pt_taudown_DM10 > 45 && abs (dau2_eta) < 2.1 && nleps == 0 && bjet1_pt > 20 && bjet2_pt > 20 && isVBFtrigger == 0 && nbjetscand > 1
baseline_tesUp_DM11   = pairType == 2 && dau1_pt_tauup_DM11   > 45 && abs (dau1_eta) < 2.1 && dau2_pt_tauup_DM11   > 45 && abs (dau2_eta) < 2.1 && nleps == 0 && bjet1_pt > 20 && bjet2_pt > 20 && isVBFtrigger == 0 && nbjetscand > 1
baseline_tesDown_DM11 = pairType == 2 && dau1_pt_taudown_DM11 > 45 && abs (dau1_eta) < 2.1 && dau2_pt_taudown_DM11 > 45 && abs (dau2_eta) < 2.1 && nleps == 0 && bjet1_pt > 20 && bjet2_pt > 20 && isVBFtrigger == 0 && nbjetscand > 1

baseline_eesUp_DM0    = pairType == 2 && dau1_pt_eleup_DM0    > 45 && abs (dau1_eta) < 2.1 && dau2_pt_eleup_DM0    > 45 && abs (dau2_eta) < 2.1 && nleps == 0 && bjet1_pt > 20 && bjet2_pt > 20 && isVBFtrigger == 0 && nbjetscand > 1
baseline_eesDown_DM0  = pairType == 2 && dau1_pt_eledown_DM0  > 45 && abs (dau1_eta) < 2.1 && dau2_pt_eledown_DM0  > 45 && abs (dau2_eta) < 2.1 && nleps == 0 && bjet1_pt > 20 && bjet2_pt > 20 && isVBFtrigger == 0 && nbjetscand > 1
baseline_eesUp_DM1    = pairType == 2 && dau1_pt_eleup_DM1    > 45 && abs (dau1_eta) < 2.1 && dau2_pt_eleup_DM1    > 45 && abs (dau2_eta) < 2.1 && nleps == 0 && bjet1_pt > 20 && bjet2_pt > 20 && isVBFtrigger == 0 && nbjetscand > 1
baseline_eesDown_DM1  = pairType == 2 && dau1_pt_eledown_DM1  > 45 && abs (dau1_eta) < 2.1 && dau2_pt_eledown_DM1  > 45 && abs (dau2_eta) < 2.1 && nleps == 0 && bjet1_pt > 20 && bjet2_pt > 20 && isVBFtrigger == 0 && nbjetscand > 1

baseline_mesUp        = pairType == 2 && dau1_pt_muup         > 45 && abs (dau1_eta) < 2.1 && dau2_pt_muup         > 45 && abs (dau2_eta) < 2.1 && nleps == 0 && bjet1_pt > 20 && bjet2_pt > 20 && isVBFtrigger == 0 && nbjetscand > 1
baseline_mesDown      = pairType == 2 && dau1_pt_mudown       > 45 && abs (dau1_eta) < 2.1 && dau2_pt_mudown       > 45 && abs (dau2_eta) < 2.1 && nleps == 0 && bjet1_pt > 20 && bjet2_pt > 20 && isVBFtrigger == 0 && nbjetscand > 1

baseline_jesUp_Tot    = pairType == 2 && dau1_pt              > 40 && abs (dau1_eta) < 2.1 && dau2_pt              > 40 && abs (dau2_eta) < 2.1 && nleps == 0 && bjet1_pt_raw_jetupTot   > 25 && bjet2_pt_raw_jetupTot   > 25 && isVBFtrigger == 0 && nbjetscand > 1
baseline_jesDown_Tot  = pairType == 2 && dau1_pt              > 40 && abs (dau1_eta) < 2.1 && dau2_pt              > 40 && abs (dau2_eta) < 2.1 && nleps == 0 && bjet1_pt_raw_jetdownTot > 25 && bjet1_pt_raw_jetdownTot > 25 && isVBFtrigger == 0 && nbjetscand > 1


###### masscuts
#boostMassCut              = tauH_SVFIT_mass > 79.5 && tauH_SVFIT_mass < 152.5 && fatjet_softdropMass > 90 && fatjet_softdropMass < 160  # <- tmeporary commented because fatjet_softdropMass is missing in the ntuples
ellypsMassCut              = ((tauH_SVFIT_mass-116.             )*(tauH_SVFIT_mass-116.             ))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0 

ellypsMassCut_tesUp_DM0    = ((tauH_SVFIT_mass_tauup_DM0-116.   )*(tauH_SVFIT_mass_tauup_DM0-116.   ))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0
ellypsMassCut_tesDown_DM0  = ((tauH_SVFIT_mass_taudown_DM0-116. )*(tauH_SVFIT_mass_taudown_DM0-116. ))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0
ellypsMassCut_tesUp_DM1    = ((tauH_SVFIT_mass_tauup_DM1-116.   )*(tauH_SVFIT_mass_tauup_DM1-116.   ))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0
ellypsMassCut_tesDown_DM1  = ((tauH_SVFIT_mass_taudown_DM1-116. )*(tauH_SVFIT_mass_taudown_DM1-116. ))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0
ellypsMassCut_tesUp_DM10   = ((tauH_SVFIT_mass_tauup_DM10-116.  )*(tauH_SVFIT_mass_tauup_DM10-116.  ))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0
ellypsMassCut_tesDown_DM10 = ((tauH_SVFIT_mass_taudown_DM10-116.)*(tauH_SVFIT_mass_taudown_DM10-116.))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0
ellypsMassCut_tesUp_DM11   = ((tauH_SVFIT_mass_tauup_DM11-116.  )*(tauH_SVFIT_mass_tauup_DM11-116.  ))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0
ellypsMassCut_tesDown_DM11 = ((tauH_SVFIT_mass_taudown_DM11-116.)*(tauH_SVFIT_mass_taudown_DM11-116.))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0

ellypsMassCut_eesUp_DM0    = ((tauH_SVFIT_mass_eleup_DM0-116.   )*(tauH_SVFIT_mass_eleup_DM0-116.   ))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0
ellypsMassCut_eesDown_DM0  = ((tauH_SVFIT_mass_eledown_DM0-116. )*(tauH_SVFIT_mass_eledown_DM0-116. ))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0
ellypsMassCut_eesUp_DM1    = ((tauH_SVFIT_mass_eleup_DM1-116.   )*(tauH_SVFIT_mass_eleup_DM1-116.   ))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0
ellypsMassCut_eesDown_DM1  = ((tauH_SVFIT_mass_eledown_DM1-116. )*(tauH_SVFIT_mass_eledown_DM1-116. ))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0

ellypsMassCut_mesUp        = ((tauH_SVFIT_mass_muup-116.        )*(tauH_SVFIT_mass_muup-116.        ))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0
ellypsMassCut_mesDown      = ((tauH_SVFIT_mass_mudown-116.      )*(tauH_SVFIT_mass_mudown-116.      ))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0

ellypsMassCut_jesUp_Tot    = ((tauH_SVFIT_mass_jetupTot-116.    )*(tauH_SVFIT_mass_jetupTot-116.    ))/(35.*35.) + ((bH_mass_raw_jetupTot-111.  )*(bH_mass_raw_jetupTot-111.  ))/(45.*45.) <  1.0
ellypsMassCut_jesDown_Tot  = ((tauH_SVFIT_mass_jetdownTot-116.  )*(tauH_SVFIT_mass_jetdownTot-116.  ))/(35.*35.) + ((bH_mass_raw_jetdownTot-111.)*(bH_mass_raw_jetdownTot-111.))/(45.*45.) <  1.0


###### VBF base
jetsVBFloose_nominal     = isVBF && VBFjj_mass            > 500 && VBFjj_deltaEta > 3
jetsVBFloose_jesUp_Tot   = isVBF && VBFjj_mass_jetupTot   > 500 && VBFjj_deltaEta > 3 && VBFjet2_pt_jetupTot   > 30
jetsVBFloose_jesDown_Tot = isVBF && VBFjj_mass_jetdownTot > 500 && VBFjj_deltaEta > 3 && VBFjet2_pt_jetdownTot > 30

noVBFloose_nominal       = !(isVBF && VBFjj_mass            > 500 && VBFjj_deltaEta > 3)
noVBFloose_jesUp_Tot     = !(isVBF && VBFjj_mass_jetupTot   > 500 && VBFjj_deltaEta > 3 && VBFjet2_pt_jetupTot   > 30)
noVBFloose_jesDown_Tot   = !(isVBF && VBFjj_mass_jetdownTot > 500 && VBFjj_deltaEta > 3 && VBFjet2_pt_jetdownTot > 30)


###### categories
s1b1jresolvedMcut_nominal      = baseline_nominal     , btagM , isBoosted != 1 , ellypsMassCut            , noVBFloose_nominal
s2b0jresolvedMcut_nominal      = baseline_nominal     , btagMM, isBoosted != 1 , ellypsMassCut            , noVBFloose_nominal
sboostedLLMcut_nominal         = baseline_nominal     , btagLL, isBoosted == 1 , ellypsMassCut            , noVBFloose_nominal #CHIA ellypsMassCut-> boostMassCut
VBFloose_nominal               = baseline_nominal     , jetsVBFloose_nominal   , tauH_SVFIT_mass > 50

s1b1jresolvedMcut_tesUp_DM0    = baseline_tesUp_DM0   , btagM , isBoosted != 1 , ellypsMassCut_tesUp_DM0  , noVBFloose_nominal
s1b1jresolvedMcut_tesDown_DM0  = baseline_tesDown_DM0 , btagM , isBoosted != 1 , ellypsMassCut_tesDown_DM0, noVBFloose_nominal
s2b0jresolvedMcut_tesUp_DM0    = baseline_tesUp_DM0   , btagMM, isBoosted != 1 , ellypsMassCut_tesUp_DM0  , noVBFloose_nominal
s2b0jresolvedMcut_tesDown_DM0  = baseline_tesDown_DM0 , btagMM, isBoosted != 1 , ellypsMassCut_tesDown_DM0, noVBFloose_nominal
sboostedLLMcut_tesUp_DM0       = baseline_tesUp_DM0   , btagLL, isBoosted == 1 , ellypsMassCut_tesUp_DM0  , noVBFloose_nominal #CHIA ellypsMassCut-> boostMassCut 
sboostedLLMcut_tesDown_DM0     = baseline_tesDown_DM0 , btagLL, isBoosted == 1 , ellypsMassCut_tesDown_DM0, noVBFloose_nominal #CHIA ellypsMassCut-> boostMassCut
VBFloose_tesUp_DM0             = baseline_tesUp_DM0   , jetsVBFloose_nominal   , tauH_SVFIT_mass_tauup_DM0   > 50
VBFloose_tesDown_DM0           = baseline_tesDown_DM0 , jetsVBFloose_nominal   , tauH_SVFIT_mass_taudown_DM0 > 50

s1b1jresolvedMcut_tesUp_DM1    = baseline_tesUp_DM1   , btagM , isBoosted != 1 , ellypsMassCut_tesUp_DM1  , noVBFloose_nominal
s1b1jresolvedMcut_tesDown_DM1  = baseline_tesDown_DM1 , btagM , isBoosted != 1 , ellypsMassCut_tesDown_DM1, noVBFloose_nominal
s2b0jresolvedMcut_tesUp_DM1    = baseline_tesUp_DM1   , btagMM, isBoosted != 1 , ellypsMassCut_tesUp_DM1  , noVBFloose_nominal
s2b0jresolvedMcut_tesDown_DM1  = baseline_tesDown_DM1 , btagMM, isBoosted != 1 , ellypsMassCut_tesDown_DM1, noVBFloose_nominal
sboostedLLMcut_tesUp_DM1       = baseline_tesUp_DM1   , btagLL, isBoosted == 1 , ellypsMassCut_tesUp_DM1  , noVBFloose_nominal #CHIA ellypsMassCut-> boostMassCut 
sboostedLLMcut_tesDown_DM1     = baseline_tesDown_DM1 , btagLL, isBoosted == 1 , ellypsMassCut_tesDown_DM1, noVBFloose_nominal #CHIA ellypsMassCut-> boostMassCut
VBFloose_tesUp_DM1             = baseline_tesUp_DM1   , jetsVBFloose_nominal   , tauH_SVFIT_mass_tauup_DM1   > 50
VBFloose_tesDown_DM1           = baseline_tesDown_DM1 , jetsVBFloose_nominal   , tauH_SVFIT_mass_taudown_DM1 > 50

s1b1jresolvedMcut_tesUp_DM10   = baseline_tesUp_DM10   , btagM , isBoosted != 1 , ellypsMassCut_tesUp_DM10  , noVBFloose_nominal
s1b1jresolvedMcut_tesDown_DM10 = baseline_tesDown_DM10 , btagM , isBoosted != 1 , ellypsMassCut_tesDown_DM10, noVBFloose_nominal
s2b0jresolvedMcut_tesUp_DM10   = baseline_tesUp_DM10   , btagMM, isBoosted != 1 , ellypsMassCut_tesUp_DM10  , noVBFloose_nominal
s2b0jresolvedMcut_tesDown_DM10 = baseline_tesDown_DM10 , btagMM, isBoosted != 1 , ellypsMassCut_tesDown_DM10, noVBFloose_nominal
sboostedLLMcut_tesUp_DM10      = baseline_tesUp_DM10   , btagLL, isBoosted == 1 , ellypsMassCut_tesUp_DM10  , noVBFloose_nominal #CHIA ellypsMassCut-> boostMassCut 
sboostedLLMcut_tesDown_DM10    = baseline_tesDown_DM10 , btagLL, isBoosted == 1 , ellypsMassCut_tesDown_DM10, noVBFloose_nominal #CHIA ellypsMassCut-> boostMassCut
VBFloose_tesUp_DM10            = baseline_tesUp_DM10   , jetsVBFloose_nominal   , tauH_SVFIT_mass_tauup_DM10   > 50
VBFloose_tesDown_DM10          = baseline_tesDown_DM10 , jetsVBFloose_nominal   , tauH_SVFIT_mass_taudown_DM10 > 50

s1b1jresolvedMcut_tesUp_DM11   = baseline_tesUp_DM11   , btagM , isBoosted != 1 , ellypsMassCut_tesUp_DM11  , noVBFloose_nominal
s1b1jresolvedMcut_tesDown_DM11 = baseline_tesDown_DM11 , btagM , isBoosted != 1 , ellypsMassCut_tesDown_DM11, noVBFloose_nominal
s2b0jresolvedMcut_tesUp_DM11   = baseline_tesUp_DM11   , btagMM, isBoosted != 1 , ellypsMassCut_tesUp_DM11  , noVBFloose_nominal
s2b0jresolvedMcut_tesDown_DM11 = baseline_tesDown_DM11 , btagMM, isBoosted != 1 , ellypsMassCut_tesDown_DM11, noVBFloose_nominal
sboostedLLMcut_tesUp_DM11      = baseline_tesUp_DM11   , btagLL, isBoosted == 1 , ellypsMassCut_tesUp_DM11  , noVBFloose_nominal #CHIA ellypsMassCut-> boostMassCut 
sboostedLLMcut_tesDown_DM11    = baseline_tesDown_DM11 , btagLL, isBoosted == 1 , ellypsMassCut_tesDown_DM11, noVBFloose_nominal #CHIA ellypsMassCut-> boostMassCut
VBFloose_tesUp_DM11            = baseline_tesUp_DM11   , jetsVBFloose_nominal   , tauH_SVFIT_mass_tauup_DM11   > 50
VBFloose_tesDown_DM11          = baseline_tesDown_DM11 , jetsVBFloose_nominal   , tauH_SVFIT_mass_taudown_DM11 > 50

s1b1jresolvedMcut_eesUp_DM0    = baseline_eesUp_DM0    , btagM , isBoosted != 1 , ellypsMassCut_eesUp_DM0  , noVBFloose_nominal
s1b1jresolvedMcut_eesDown_DM0  = baseline_eesDown_DM0  , btagM , isBoosted != 1 , ellypsMassCut_eesDown_DM0, noVBFloose_nominal
s2b0jresolvedMcut_eesUp_DM0    = baseline_eesUp_DM0    , btagMM, isBoosted != 1 , ellypsMassCut_eesUp_DM0  , noVBFloose_nominal
s2b0jresolvedMcut_eesDown_DM0  = baseline_eesDown_DM0  , btagMM, isBoosted != 1 , ellypsMassCut_eesDown_DM0, noVBFloose_nominal
sboostedLLMcut_eesUp_DM0       = baseline_eesUp_DM0    , btagLL, isBoosted == 1 , ellypsMassCut_eesUp_DM0  , noVBFloose_nominal #CHIA ellypsMassCut-> boostMassCut 
sboostedLLMcut_eesDown_DM0     = baseline_eesDown_DM0  , btagLL, isBoosted == 1 , ellypsMassCut_eesDown_DM0, noVBFloose_nominal #CHIA ellypsMassCut-> boostMassCut
VBFloose_eesUp_DM0             = baseline_eesUp_DM0    , jetsVBFloose_nominal   , tauH_SVFIT_mass_eleup_DM0   > 50
VBFloose_eesDown_DM0           = baseline_eesDown_DM0  , jetsVBFloose_nominal   , tauH_SVFIT_mass_eledown_DM0 > 50

s1b1jresolvedMcut_eesUp_DM1    = baseline_eesUp_DM1    , btagM , isBoosted != 1 , ellypsMassCut_eesUp_DM1  , noVBFloose_nominal
s1b1jresolvedMcut_eesDown_DM1  = baseline_eesDown_DM1  , btagM , isBoosted != 1 , ellypsMassCut_eesDown_DM1, noVBFloose_nominal
s2b0jresolvedMcut_eesUp_DM1    = baseline_eesUp_DM1    , btagMM, isBoosted != 1 , ellypsMassCut_eesUp_DM1  , noVBFloose_nominal
s2b0jresolvedMcut_eesDown_DM1  = baseline_eesDown_DM1  , btagMM, isBoosted != 1 , ellypsMassCut_eesDown_DM1, noVBFloose_nominal
sboostedLLMcut_eesUp_DM1       = baseline_eesUp_DM1    , btagLL, isBoosted == 1 , ellypsMassCut_eesUp_DM1  , noVBFloose_nominal #CHIA ellypsMassCut-> boostMassCut 
sboostedLLMcut_eesDown_DM1     = baseline_eesDown_DM1  , btagLL, isBoosted == 1 , ellypsMassCut_eesDown_DM1, noVBFloose_nominal #CHIA ellypsMassCut-> boostMassCut
VBFloose_eesUp_DM1             = baseline_eesUp_DM1    , jetsVBFloose_nominal   , tauH_SVFIT_mass_eleup_DM1   > 50
VBFloose_eesDown_DM1           = baseline_eesDown_DM1  , jetsVBFloose_nominal   , tauH_SVFIT_mass_eledown_DM1 > 50

s1b1jresolvedMcut_mesUp        = baseline_mesUp        , btagM , isBoosted != 1 , ellypsMassCut_mesUp      , noVBFloose_nominal
s1b1jresolvedMcut_mesDown      = baseline_mesDown      , btagM , isBoosted != 1 , ellypsMassCut_mesDown    , noVBFloose_nominal
s2b0jresolvedMcut_mesUp        = baseline_mesUp        , btagMM, isBoosted != 1 , ellypsMassCut_mesUp      , noVBFloose_nominal
s2b0jresolvedMcut_mesDown      = baseline_mesDown      , btagMM, isBoosted != 1 , ellypsMassCut_mesDown    , noVBFloose_nominal
sboostedLLMcut_mesUp           = baseline_mesUp        , btagLL, isBoosted == 1 , ellypsMassCut_mesUp      , noVBFloose_nominal #CHIA ellypsMassCut-> boostMassCut 
sboostedLLMcut_mesDown         = baseline_mesDown      , btagLL, isBoosted == 1 , ellypsMassCut_mesDown    , noVBFloose_nominal #CHIA ellypsMassCut-> boostMassCut
VBFloose_mesUp                 = baseline_mesUp        , jetsVBFloose_nominal   , tauH_SVFIT_mass_muup   > 50
VBFloose_mesDown               = baseline_mesDown      , jetsVBFloose_nominal   , tauH_SVFIT_mass_mudown > 50

s1b1jresolvedMcut_jesUp_Tot    = baseline_jesUp_Tot    , btagM , isBoosted != 1  , ellypsMassCut_jesUp_Tot  , noVBFloose_jesUp_Tot
s1b1jresolvedMcut_jesDown_Tot  = baseline_jesDown_Tot  , btagM , isBoosted != 1  , ellypsMassCut_jesDown_Tot, noVBFloose_jesDown_Tot
s2b0jresolvedMcut_jesUp_Tot    = baseline_jesUp_Tot    , btagMM, isBoosted != 1  , ellypsMassCut_jesUp_Tot  , noVBFloose_jesUp_Tot
s2b0jresolvedMcut_jesDown_Tot  = baseline_jesDown_Tot  , btagMM, isBoosted != 1  , ellypsMassCut_jesDown_Tot, noVBFloose_jesDown_Tot
sboostedLLMcut_jesUp_Tot       = baseline_jesUp_Tot    , btagLL, isBoosted == 1  , ellypsMassCut_jesUp_Tot  , noVBFloose_jesUp_Tot   #CHIA ellypsMassCut-> boostMassCut
sboostedLLMcut_jesDown_Tot     = baseline_jesDown_Tot  , btagLL, isBoosted == 1  , ellypsMassCut_jesDown_Tot, noVBFloose_jesDown_Tot #CHIA ellypsMassCut-> boostMassCut
VBFloose_jesUp_Tot             = baseline_jesUp_Tot    , jetsVBFloose_jesUp_Tot  , tauH_SVFIT_mass_jetupTot   > 50
VBFloose_jesDown_Tot           = baseline_jesDown_Tot  , jetsVBFloose_jesDown_Tot, tauH_SVFIT_mass_jetdownTot > 50



#########################################################################
#########################################################################

## weights to be applied for a certain selections when calling Fill()
## multiple weights are passed as list and are multiplied together
## NOTE: no weight is applied for data (the simple Fill() is used)
[selectionWeights]
#baseline = MC_weight, PUReweight, L1pref_weight, trigSF, FakeRateSF_deep, DYscale_MTT, prescaleWeight, PUjetID_SF
baseline = MC_weight, PUReweight, L1pref_weight, trigSF, IdAndIsoAndFakeSF_deep_pt, DYscale_MTT, prescaleWeight, PUjetID_SF

# remove DY weights, they are already taken into account in baseline weights
btagLL    = bTagweightL
btagMM    = bTagweightM
nobtagMM  = bTagweightM
btagL     = bTagweightL
btagM     = bTagweightM


[selectionWeights_ext] # beta feature! use with care!
#weights decay mode dependent computed with QCD backgrond estimation, DY LO weights, old DY weights, on top of decay mode dependend trigger weights, m_vis > 55 #11 Mar 2019 #used for testing, already saved in the skims

# tauIDSF 8May2020
#baseline = (dau1_decayMode == 0 && isTau1real ): 1.182, (dau2_decayMode == 0 && isTau2real ): 1.182, (dau1_decayMode == 1 && isTau1real): 1.146, (dau2_decayMode == 1 && isTau2real ): 1.146, (dau1_decayMode == 10 && isTau1real ): 1.149, (dau2_decayMode == 10 && isTau2real ): 1.149, (dau1_decayMode == 11 && isTau1real ): 0.811, (dau2_decayMode == 11 && isTau2real ): 0.811


#########################################################################
#########################################################################

[sampleWeights]
TTfullyHad = TTtopPtreweight #, IdAndIsoSF
TTfullyLep = TTtopPtreweight #, IdAndIsoSF
TTsemiLep  = TTtopPtreweight #, IdAndIsoSF

#########################################################################
#########################################################################

# define alternative weights to be tested instead of the nominal one
[systematics]
#TTtopPtreweight  = topUp:TTtopPtreweight_up , topDown:TTtopPtreweight_down
# trigSF         = trigUP:trigSF_up , trigDOWN:trigSF_down
# turnOnreweight = rewUP:turnOnreweight_tauup, rewDO:turnOnreweight_taudown

#########################################################################
#########################################################################

# ROOT-like definition of the binning
[histos]
DNNoutSM_kl_1            = 20,0,1


#########################################################################
#########################################################################

# user defined binning for a variable - has precedence on [histos]
[binning]

#########################################################################
#########################################################################

[histos2D]

[binning2D]


